<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Bangla Consonants (‡¶¨‡ßç‡¶Ø‡¶û‡ßç‡¶ú‡¶®‡¶¨‡¶∞‡ßç‡¶£)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #007BFF;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .consonant-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .consonant-card {
            background-color: white;
            border: 1px solid #ddd;
            padding: 15px;
            text-align: center;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .consonant-card h2 {
            font-size: 2em;
            color: #007BFF;
        }
        .example-words {
            margin: 10px 0;
            text-align: left;
        }
        .audio-icon {
            font-size: 1.2em;
            color: #007BFF;
            cursor: pointer;
            margin-left: 5px;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #333;
            color: white;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
    <header>
        <h1>
            Learn Bangla Consonants (‡¶¨‡ßç‡¶Ø‡¶û‡ßç‡¶ú‡¶®‡¶¨‡¶∞‡ßç‡¶£ 
            <i class="audio-icon" onclick="playAudio('consonant_title.mp3')">üîä</i>)
        </h1>
        <p>Click on the audio icons to hear pronunciations!</p>
    </header>
    <main class="consonant-section" id="consonant-section">
        <!-- Dynamic content will be injected here -->
    </main>
    <footer>
        <p>Learn Bangla ¬© 2024 | Contact: info@learnbangla.com</p>
    </footer>

    <script>
        const csvFilePath = "https://raw.githubusercontent.com/ArindamRoyC1/Learn_Bangla/main/Bangla_Consonants.csv";
        const audioFolder = "https://raw.githubusercontent.com/ArindamRoyC1/Learn_Bangla/main/audio_files/";

        async function fetchCSVData() {
            const response = await fetch(csvFilePath);
            const csvData = await response.text();

            // Parse CSV using PapaParse
            const parsedData = Papa.parse(csvData, { header: true, skipEmptyLines: true });
            return parsedData.data.map(row => ({
                consonant: row.Consonant.trim(),
                transliteration: row.Transliteration.trim(),
                exampleWords: row["Example Words"] ? row["Example Words"].split(",").map(word => word.trim()) : [],
                meanings: row.Meanings ? row.Meanings.split(",").map(meaning => meaning.trim()) : []
            }));
        }

        async function displayConsonants() {
            const data = await fetchCSVData();
            const consonantSection = document.getElementById("consonant-section");

            data.forEach(item => {
                const card = document.createElement("div");
                card.className = "consonant-card";

                // Generate word list
                const wordListHTML = item.exampleWords.length > 0 ? item.exampleWords.map((word, index) => `
                    <li>${word} - ${item.meanings[index] || "No meaning"} 
                        <i class="audio-icon" onclick="playAudio('${word}.mp3')">üîä</i>
                    </li>
                `).join("") : "";

                // Special message logic
                const specialMessage = item.exampleWords.length === 0 
                    ? `<p>${item.meanings}</p>`
                    : "";

                card.innerHTML = `
                    <h2>${item.consonant} (${item.transliteration})</h2>
                    ${specialMessage}
                    ${wordListHTML ? `<ul class="example-words">${wordListHTML}</ul>` : ""}
                    <p>Pronounce ${item.consonant}: <i class="audio-icon" onclick="playAudio('${item.consonant}.mp3')">üîä</i></p>
                `;

                consonantSection.appendChild(card);
            });
        }

        function playAudio(filename) {
            const audioUrl = audioFolder + filename;
            const audio = new Audio(audioUrl);
            audio.play();
        }

        displayConsonants();
    </script>
</body>
</html>
